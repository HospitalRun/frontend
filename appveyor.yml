# Fix line endings in Windows. (runs before repo cloning)
init:
  - git config --global core.autocrlf true

clone_depth: 1

platform:
  - x64

cache:
  - node_modules -> package.json
  - '%APPDATA%\npm-cache'
  - "%LOCALAPPDATA%\\Yarn"

branches:
  only:
    - master
    - production
    - dev

# Install scripts. (runs after repo cloning)
install:
  # Let's try to get things working
  # Install Node 6 ---------------------------------------------------------
  - ps: Install-Product node 7 x64
  # Typical npm stuff ------------------------------------------------------
  - yarn install

test_script:
  - yarn build
  # - npm test
  - yarn run electron-test
# Set build version format here instead of in the admin panel.
build: off
version: "{build}"
