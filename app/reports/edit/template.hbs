<div class="report-header">
  {{#if logoURL}}
    <img src={{logoURL}} class="report-logo">
  {{/if}}
  {{#if facilityName }}
    <h3>{{facilityName}}</h3>
  {{/if}}
  {{#if headerLine1}}
    <span>{{headerLine1}}</span><br>
  {{/if}}
  {{#if headerLine2}}
    <span>{{headerLine2}}</span><br>
  {{/if}}
  {{#if headerLine3}}
    <span>{{headerLine3}}</span><br>
  {{/if}}
</div>
  <div class="opd-report">
    {{#edit-panel editPanelProps=editPanelProps}}
    {{#em-form model=model submitButton=false }}
      {{#if model.visit}}
        {{patient-summary
          patient=model.visit.patient
          returnTo='visit.edit'
          returnToContext=model.id
          disablePatientLink=model.isNew
          diagnosisContainer=model.visit
          diagnosisList=diagnosisList
        }}
      {{/if}}

      {{#if model.visit.startDate}}
        <div class="ps-info-group">
          <label class="ps-info-label">{{t 'reports.form.visitDate' }}</label>
          {{date-format model.visit.startDate format="DD/MM/YYYY hh:mm a"}}
        </div>
      {{/if}}

      {{#unless model.visit.outPatient}}
        <div class="ps-info-group">
          <p class="ps-info-label">{{t 'reports.form.dischargeDate' }}</p>
          {{date-format model.reportDate format="DD/MM/YYYY hh:mm a"}}
        </div>
      {{/unless}}

      {{#unless model.visit.outPatient}}
        <div class="row">
          {{select-or-typeahead className="col-sm-4" property="surgeon"
           label=(t "operativePlan.labels.surgeon") list=physicianList
           selection=model.surgeon
           class="plan-surgeon"
          }}
        </div>
      {{/unless}}

      {{#unless model.visit.outPatient}}
        {{#if model.visit.notes}}
          <div class="ps-info-group">
            <label class="ps-info-label">{{t 'reports.form.notes' }}</label>
            <ul>
                <li>{{model.visit.notes}}</li>
            </ul>
          </div>
        {{/if}}
      {{/unless}}

      {{#if model.visit.procedures.length}}
        <div class="ps-info-group">
          <label class="ps-info-label">{{t 'reports.form.procedures' }}</label>
          <ul>
            {{#each model.visit.procedures as |item|}}
              <li>{{item.description}}</li>
            {{/each}}
          </ul>
        </div>
      {{/if}}

      {{#if model.visit.labs.length}}
        <div class="ps-info-group">
          <label class="ps-info-label">{{t 'reports.form.labs' }}</label>
          <ul>
            {{#each model.visit.labs as |item|}}
              <li>{{item.labType.name}}-{{item.result}} ({{item.status}})</li>
            {{/each}}
          </ul>
        </div>
      {{/if}}

      {{#if model.visit.imaging.length}}
        <div class="ps-info-group">
          <label class="ps-info-label">{{t 'reports.form.images' }}</label>
          <ul>
            {{#each model.visit.imaging as |item|}}
              <li>{{item.imagingType.name}}-{{item.result}} ({{item.status}})</li>
            {{/each}}
          </ul>
        </div>
      {{/if}}

      {{#if model.visit.medication.length}}
        <div class="ps-info-group">
          <label class="ps-info-label">{{t 'reports.form.medications' }}</label>
          <ul>
            {{#each model.visit.medication as |medication|}}
              <li>{{medication.medicationName}} - {{medication.prescription}} ({{medication.status}})</li>
            {{/each}}
          </ul>
        </div>
      {{/if}}

      {{#if nextAppointment}}
        <div class="ps-info-group">
          <label class="ps-info-label">{{t 'reports.form.nextAppointmentDate' }}:</label>
         {{date-format nextAppointment format="DD/MM/YYYY hh:mm a"}}
        </div>
      {{/if}}

      {{#if model.visit.patient.operativePlans.length}}
        <div class="ps-info-group">
          <label class="ps-info-label">{{t 'reports.form.operativePlan.title' }}</label>
          <ul>
              {{#each model.visit.patient.operativePlans as |operativePlan|}}
                <li>
                  <p><b>{{t 'reports.form.operativePlan.description' }}:</b><br>
                  {{operativePlan.operationDescription}}</p>
                </li>

                <li>
                  <p><b>{{t 'reports.form.operativePlan.procedures' }}:</b></p>
                  <ul>
                    {{#each operativePlan.procedures as |procedure|}}
                      <li>{{procedure.description}}</li>
                    {{/each}}
                  </ul>
                </li>

                <li>
                  <p><b>{{t 'reports.form.operativePlan.instructions' }}:</b><br>
                    {{operativePlan.admissionInstructions}}
                  </p>
                </li>
              {{/each}}
          </ul>
        </div>
      {{/if}}

      {{#if model.visit.outPatient}}
        {{custom-form-manager model=model formType="opdReport"}}
      {{else}}
        {{custom-form-manager model=model formType="dischargeReport"}}
      {{/if}}



    {{/em-form}}
  {{/edit-panel}}
  </div>
